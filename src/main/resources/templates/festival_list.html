<!DOCTYPE html>
<html layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/festival_list.css">

    <!--  제이쿼리 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
<div layout:fragment="content" class="container my-3">
    <h1>진행 중인 축제 리스트</h1>
    <div class="festival-list">
        <div class="festival-item" th:each="festival : ${festivals}">
            <a th:href="@{|/festival/detail/${festival.id}|}">
                <img th:src="${festival.picture}" alt="축제 이미지">
                <h2 th:text="${festival.title}">축제 제목</h2>
                <p th:text="${festival.event_Period}">축제 기간</p>
            </a>
        </div>
    </div>

    <div class="festival-pagination">
        <!-- 이전 페이지로 이동하는 링크 -->
        <a th:if="${currentPage > 1}" th:href="@{|/festival/list/page/${currentPage - 1}|}">&lt;</a>

        <!-- 페이지 버튼 표시 -->
        <span th:each="pageNum : ${#numbers.sequence(1, totalPages)}">
        <a th:if="${pageNum == currentPage}" th:text="${pageNum}" class="page-number current-page"></a>
        <a th:if="${pageNum != currentPage}" th:href="@{|/festival/list/page/${pageNum}|}" th:text="${pageNum}" class="page-number"></a>
    </span>

        <!-- 다음 페이지로 이동하는 링크 -->
        <a th:if="${currentPage < totalPages}" th:href="@{|/festival/list/page/${currentPage + 1}|}">&gt;</a>
    </div>

    <script>
        function showFestivalDetail(event, title, period, picture) {
            // 기본 이벤트 동작 막기 (링크 이동 방지)
            event.preventDefault();

            // 예시: 상세 정보를 모달 또는 다른 방법으로 표시
            console.log("축제 제목: " + title);
            console.log("축제 기간: " + period);
            console.log("축제 이미지 URL: " + picture);

            // 상세 페이지로 이동하려면 window.location.href를 사용
            // window.location.href = "/festival/detail?title=" + title;
            // 위 코드는 클릭한 축제의 제목을 URL 매개변수로 전달하는 예시입니다.
        }
    </script>
</div>
</body>
</html>
